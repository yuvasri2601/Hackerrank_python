t=int(input())
for i in range(t):
    c=0
    l=list(map(int,input().split()))
    while(l[3]>l[1]):
        l[3]=l[3]-l[1]+l[0]
        c=c+l[1]+l[0]
    c=c+l[3]
    print(l[2]*c)
        
